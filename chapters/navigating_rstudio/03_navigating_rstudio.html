<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>navigating_rstudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="03_navigating_rstudio_files/libs/clipboard/clipboard.min.js"></script>
<script src="03_navigating_rstudio_files/libs/quarto-html/quarto.js"></script>
<script src="03_navigating_rstudio_files/libs/quarto-html/popper.min.js"></script>
<script src="03_navigating_rstudio_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="03_navigating_rstudio_files/libs/quarto-html/anchor.min.js"></script>
<link href="03_navigating_rstudio_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="03_navigating_rstudio_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="03_navigating_rstudio_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="03_navigating_rstudio_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="03_navigating_rstudio_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="navigating-the-rstudio-interface" class="level1">
<h1>Navigating the RStudio Interface</h1>
<p>You now have R and RStudio on your computer and you have some idea of what R and RStudio are. At this point, it is really common for people to open RStudio and get totally overwhelmed. <em>‚ÄúWhat am I looking at?‚Äù</em> <em>‚ÄùWhat do I click first?‚Äù</em> <em>‚ÄúWhere do I even start?‚Äù</em> Don‚Äôt worry if these, or similar, thoughts have crossed your mind. You are in good company and we will start to clear some of them up in this chapter.</p>
<p>When you first load RStudio you should see a screen that looks very similar to what you see in the picture below. @ref(fig:rstudio) In the current view, you see three <strong>panes</strong> and each pane has multiple tabs. Don‚Äôt beat yourself up if this isn‚Äôt immediately obvious. We‚Äôll make it clearer soon.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="rstudio.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="the-console" class="level2">
<h2 class="anchored" data-anchor-id="the-console">The console</h2>
<p>The first pane we are going to talk about is the Console/Terminal/Jobs pane. @ref(fig:console)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="console.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>It‚Äôs called the Console/Terminal/Jobs pane because it has three tabs you can click on: Console, Terminal, and Jobs. However, we will mostly refer to it as the Console pane and we will mostly ignore the Terminal and Jobs tabs. We aren‚Äôt ignoring them because they aren‚Äôt useful; rather, we are ignoring them because using them isn‚Äôt essential for anything we discuss anytime soon, and we want to keep things as simple as possible.</p>
<p>The <strong>console</strong> is the most basic way to interact with R. You can type a command to R into the console prompt (the prompt looks like ‚Äú&gt;‚Äù) and R will respond to what you type. For example, below we‚Äôve typed ‚Äú1 plus 1,‚Äù hit enter, and the R console returned the sum of the numbers 1 and 1. @ref(fig:one-plus-one)</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="one_plus_one.png" class="img-fluid figure-img"></p>
<figcaption>Doing some addition in the R console.</figcaption>
</figure>
</div>
</div>
</div>
<p>The number 1 you see in brackets before the 2 (i.e., [1]) is telling you that this line of results starts with the first result. That fact is obvious here because there is only one result. To make this idea clearer, let‚Äôs show you a result with multiple lines.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="seq_function.png" class="img-fluid figure-img"></p>
<figcaption>Demonstrating a function that returns multiple results.</figcaption>
</figure>
</div>
</div>
</div>
<p>In the screenshot above we see a couple new things demonstrated. @ref(fig:seq-function)</p>
<p>First, as promised, we have more than one line of results (or output). The first line of results starts with a 1 in brackets (i.e., [1]), which indicates that this line of results starts with the first result. In this case the first result is the number 2. The second line of results starts with a 29 in brackets (i.e., [29]), which indicates that this line of results starts with the twenty-ninth result. In this case the twenty-ninth result is the number 58. If you count the numbers in the first line, there should be 28 ‚Äì results 1 through 28. we also want to make it clear that ‚Äú1‚Äù and ‚Äú29‚Äù are NOT results themselves. They are just helping us count the number of results per line.</p>
<p>The second new thing here that you may have noticed is our use of a <strong>function</strong>. Functions are a <strong>BIG DEAL</strong> in R. So much so that R is called a <em>functional language</em>. You don‚Äôt really need to know all the details of what that means; however, you should know that, in general, everything you <em>do</em> in R you will <em>do</em> with a function. By contrast, everything you <em>create</em> in R will be an <em>object</em>. If you wanted to make an analogy between the R language and the English language, functions are verbs ‚Äì they <em>do</em> things ‚Äì and objects are nouns ‚Äì they <em>are</em> things. This may be confusing right now. Don‚Äôt worry. It will become clearer soon.</p>
<p>Most functions in R begin with the function name followed by parentheses. For example, <code>seq()</code>, <code>sum()</code>, and <code>mean()</code>.</p>
<p><em>Question</em>: What is the name of the function we used in the example above?</p>
<p>It‚Äôs the <code>seq()</code> function ‚Äì short for sequence. Inside the function, you may notice that there are three pairs of words, equal symbols, and numbers that are separated by commas. They are, <code>from = 2</code>, <code>to = 100</code>, and <code>by = 2</code>. In this case, <code>from</code>, <code>to</code>, and <code>by</code> are all <strong>arguments</strong> to the <code>seq()</code> function. We don‚Äôt know why they are called arguments, but as far as we are concerned, they just are. We will learn more about functions and arguments later, but for now just know that arguments <em>give functions the information they need to give us the result we want</em>.</p>
<p>In this case, the <code>seq()</code> function gives us a sequence of numbers, but we have to give it information about where that sequence should start, where it should end, and how many steps should be in the middle. Here the sequence begins with the value we gave to the <code>from</code> argument (i.e., 2), ends with the value we gave to the <code>to</code> argument (i.e., 100), and increases at each step by the number we gave to the <code>by</code> argument (i.e., 2). So, 2, 4, 6, 8 ‚Ä¶ 100.</p>
<p>While it‚Äôs convenient, let‚Äôs also learn some programming terminology:</p>
<ul>
<li><p><strong>Arguments:</strong> Arguments always go <em>inside</em> the parentheses of a function and give the function the information it needs to give us the result we want.</p></li>
<li><p><strong>Pass:</strong> In programming lingo, you <em>pass</em> a value to a function argument. For example, in the function call <code>seq(from = 2, to = 100, by = 2)</code> we could say that we passed a value of 2 to the <code>from</code> argument, we passed a value of 100 to the <code>to</code> argument, and we passed a value of 2 to the <code>by</code> argument.</p></li>
<li><p><strong>Returns:</strong> Instead of saying, ‚Äúthe <code>seq()</code> function <em>gives us</em> a sequence of numbers‚Ä¶‚Äù we could say, ‚Äúthe <code>seq()</code> function <em>returns</em> a sequence of numbers‚Ä¶‚Äù In programming lingo, functions <em>return</em> one or more results.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>üóí<strong>Side Note:</strong> The <code>seq()</code> function isn‚Äôt particularly important or noteworthy. We essentially chose it at random to illustrate some key points. However, arguments, passing values, and return values are extremely important concepts and we will return to them many times.</p>
</div>
</div>
</section>
<section id="the-environment-pane" class="level2">
<h2 class="anchored" data-anchor-id="the-environment-pane">The environment pane</h2>
<p>The second pane we are going to talk about is the Environment/History/Connections pane. @ref(fig:environment-pane) However, we will mostly refer to it as the Environment pane and we will mostly ignore the History and Connections tab. We aren‚Äôt ignoring them because they aren‚Äôt useful; rather, we are ignoring them because using them isn‚Äôt essential for anything we will discuss anytime soon, and we want to keep things as simple as possible.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="environment_pane.png" class="img-fluid figure-img"></p>
<figcaption>The environment pane</figcaption>
</figure>
</div>
</div>
</div>
<p>The Environment pane shows you all the <strong>objects</strong> that R can currently use for data management or analysis. In this picture, @ref(fig:environment-pane) our environment is empty. Let‚Äôs create an object and add it to our Environment.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="environment_pane2.png" class="img-fluid figure-img"></p>
<figcaption>The vector x in the global environment.</figcaption>
</figure>
</div>
</div>
</div>
<p>Here we see that we created a new object called <code>x</code>, which now appears in our <strong>Global Environment</strong>. @ref(fig:environment-pane2) This gives us another great opportunity to discuss some new concepts.</p>
<p>First, we created the <code>x</code> object in the Console by <em>assigning</em> the value 2 to the letter x. We did this by typing ‚Äúx‚Äù followed by a less than symbol (&lt;), a dash symbol (-), and the number 2. R is kind of unique in this way. we have never seen another programming language (although I‚Äôm sure they are out there) that uses <code>&lt;-</code> to assign values to variables. By the way, <code>&lt;-</code> is called the assignment operator (or assignment arrow), and ‚Äùassign‚Äù here means ‚Äúmake x contain 2‚Äù or ‚Äúput 2 inside x.‚Äù</p>
<p>In many other languages you would write that as <code>x = 2</code>. But, for whatever reason, in R it is <code>&lt;-</code>. Unfortunately, <code>&lt;-</code> is more awkward to type than <code>=</code>. Fortunately, RStudio gives us a keyboard shortcut to make it easier. To type the assignment operator in RStudio, just hold down Option + - (dash key) on a Mac or Alt + - (dash key) on a PC and RStudio will insert <code>&lt;-</code> complete with spaces on either side of the arrow. This may still seem awkward at first, but you will get used to it.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>üóí<strong>Side Note:</strong> A note about using the letter ‚Äúx‚Äù: By convention, the letter ‚Äúx‚Äù is a widely used variable name. You will see it used a lot in example documents and online. However, there is nothing special about the letter x. We could have just as easily used any other letter (<code>a &lt;- 2</code>), word (<code>variable &lt;- 2</code>), or descriptive name (<code>my_favorite_number &lt;- 2</code>) that is allowed by R.</p>
</div>
</div>
<p>Second, you can see that our Global Environment now includes the object <code>x</code>, which has a value of 2. In this case, we would say that <code>x</code> is a <strong>numeric vector</strong> of length 1 (i.e., it has one value stored in it). We will talk more about vectors and vector types soon. For now, just notice that objects that you can manipulate or analyze in R will appear in your Global Environment.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>‚ö†Ô∏è<strong>Warning:</strong> R is a <strong>case sensitive</strong> language. That means that uppercase x (X) and lowercase x (x) are different things to R. So, if you assign 2 to lower case x (<code>x &lt;- 2</code>). And then later ask R to tell what number you stored in uppercase X, you will get an error (<code>Error: object 'X' not found</code>).</p>
</div>
</div>
</section>
<section id="the-files-pane" class="level2">
<h2 class="anchored" data-anchor-id="the-files-pane">The files pane</h2>
<p>Next, let‚Äôs talk about the Files/Plots/Packages/Help/Viewer pane (that‚Äôs a mouthful). @ref(fig:files-pane)</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="files_pane.png" class="img-fluid figure-img"></p>
<figcaption>The Files/Plots/Packages/Help/Viewer pane.</figcaption>
</figure>
</div>
</div>
</div>
<p>Again, some of these tabs are more applicable for us than others. For us, the <strong>files</strong> tab and the <strong>help</strong> tab will probably be the most useful. You can think of the files tab as a mini Finder window (for Mac) or a mini File Explorer window (for PC). The help tab is also extremely useful once you get acclimated to it.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="help.png" class="img-fluid figure-img"></p>
<figcaption>The help tab.</figcaption>
</figure>
</div>
</div>
</div>
<p>For example, in the screenshot above @ref(fig:help) we typed the <code>seq</code> into the search bar. The help pane then shows us a page of documentation for the <code>seq()</code> function. The documentation includes a brief description of what the function does, outlines all the arguments the <code>seq()</code> function recognizes, and, if you scroll down, gives examples of using the <code>seq()</code> function. Admittedly, this help documentation can seem a little like reading Greek (assuming you don‚Äôt speak Greek) at first. But, you will get more comfortable using it with practice. We hated the help documentation when we were learning R. Now, we use it <em>all the time</em>.</p>
</section>
<section id="the-source-pane" class="level2">
<h2 class="anchored" data-anchor-id="the-source-pane">The source pane</h2>
<p>There is actually a fourth pane available in RStudio. If you click on the icon shown below you will get the following dropdown box with a list of files you can create. @ref(fig:source1)</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="source1.png" class="img-fluid figure-img"></p>
<figcaption>Click the new source file icon.</figcaption>
</figure>
</div>
</div>
</div>
<p>If you click any of these options, a new pane will appear. We will arbitrarily pick the first option ‚Äì R Script.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="source2.png" class="img-fluid figure-img"></p>
<figcaption>New source file options.</figcaption>
</figure>
</div>
</div>
</div>
<p>When we do, a new pane appears. It‚Äôs called the <strong>source pane</strong>. In this case, the source pane contains an untitled R Script. We won‚Äôt get into the details now because we don‚Äôt want to overwhelm you, but soon you will do the majority of your R programming in the source pane.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="source3.png" class="img-fluid figure-img"></p>
<figcaption>A blank R script in the source pane.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="rstudio-preferences" class="level2">
<h2 class="anchored" data-anchor-id="rstudio-preferences">RStudio preferences</h2>
<p>Finally, We‚Äôre going to recommend that you change a few settings in RStudio before we move on. Start by clicking <code>Tools</code>, and then <code>Global Options</code> in RStudio‚Äôs menu bar, which probably runs horizontally across the top of your computer‚Äôs screen.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="preferences1.png" class="img-fluid figure-img"></p>
<figcaption>Select the preferences menu on Mac.</figcaption>
</figure>
</div>
</div>
</div>
<p>In the <code>General</code> tab, we recommend turning off the <code>Restore .Rdata into workspace at startup</code> option. We also recommend setting the <code>Save workspace .Rdata on exit</code> dropdown to <code>Never</code>. Finally, we recommend turning off the <code>Always save history (even when not saving .Rdata)</code> option.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="preferences3.png" class="img-fluid figure-img"></p>
<figcaption>General options tab.</figcaption>
</figure>
</div>
</div>
</div>
<p>We change our editor theme to Twilight in the <code>Appearance</code> tab. We aren‚Äôt necessarily recommending that you change your theme ‚Äì this is entirely personal preference ‚Äì we‚Äôre just letting you know why our screenshots will look different from here on out.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="preferences4.png" class="img-fluid figure-img"></p>
<figcaption>Appearance tab.</figcaption>
</figure>
</div>
</div>
</div>
<p>It‚Äôs likely that you still have lots of questions at this point. That‚Äôs totally natural. However, we hope you now feel like you have some idea of what you are looking at when you open RStudio. Most of you will naturally get more comfortable with RStudio as we move through the book. For those of you who want more resources now, here are some suggestions.</p>
<ol type="1">
<li><p><a href="https://rstudio.com/resources/cheatsheets/">RStudio IDE cheatsheet</a></p></li>
<li><p><a href="https://moderndive.com/1-getting-started.html#r-rstudio">ModernDive: What are R and RStudio?</a></p></li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>